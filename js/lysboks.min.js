function lysboks(e){"use strict";void 0===e&&(e={}),void 0===e.beholder&&(e.beholder=".bildegalleri"),void 0===e.hastighet&&(e.hastighet=200),void 0===e.lukk&&(e.lukk="ingen");let t=[],i=document.body,l=getComputedStyle(i).overflow,n=parseInt(getComputedStyle(i).marginRight.replace("px","")),o=window.innerWidth-document.documentElement.clientWidth;function r(e){const i=e.querySelector("img").getAttribute("title");t.push({stor:e.getAttribute("href"),liten:e.querySelector("img").getAttribute("src"),litenH:e.querySelector("img").getBoundingClientRect().height,litenW:e.querySelector("img").getBoundingClientRect().width,...null==i?{title:""}:{title:i}})}function s(i){!function(e){document.querySelector("#lysboksBilde img").setAttribute("src",t[e].stor),document.querySelector("#lysboksBilde img").setAttribute("title",t[e].title),document.querySelector("#lysboksTooltip").innerText=t[e].title,document.querySelector("#lysboksLeft").dataset.target=0===e?null:e-1;e>=t.length-1?document.querySelector("#lysboksRight").dataset.target=null:document.querySelector("#lysboksRight").dataset.target=e+1}(i),document.querySelector("#lysboksMain").style.transitionDuration=e.hastighet+"ms",document.querySelector("#lysboksMain").classList.remove("hide"),function(t){let i=document.querySelector("#miniatyrBilder"),l=document.querySelectorAll(".miniatyrBilde")[t],n=window.innerWidth/2,o=i.getBoundingClientRect(),r=l.getBoundingClientRect(),s=o.left-r.left,d=r.width/2,a=s+n-d;i.style.transitionDuration=e.hastighet+"ms",l.style.transitionDuration=e.hastighet+"ms",i.scrollWidth>window.innerWidth&&(a>0?i.style.left="0px":a-window.innerWidth+i.scrollWidth<0?i.style.left="calc("+(-i.scrollWidth+window.innerWidth)+"px - .5vh)":i.style.left=a+"px");document.querySelectorAll(".miniatyrBilde").forEach((e=>{e.dataset.target==t?e.classList.add("selected"):e.classList.remove("selected")}))}(i)}function d(e){!0===e?(i.style.overflow="hidden",i.style.marginRight=n+o+"px"):(i.style.overflow=l,i.style.marginRight=n+"px")}document.addEventListener("DOMContentLoaded",(()=>{let l=document.querySelectorAll(e.beholder+" a:has(>img)"),n=0,o=[];l.forEach((e=>{o.push(function(e){return new Promise((t=>{const i=new Image;i.src=e.getAttribute("href"),i.onload=()=>t({element:e,isImage:!0}),i.onerror=()=>t({element:e,isImage:!1})}))}(e))})),Promise.all(o).then((l=>{for(let e=0;e<l.length;e++){let t=l[e];1==t.isImage&&(r(t.element),t.element.dataset.target=n,n++)}!function(){let l='\n        <div id="lysboks" class="hide" style="transition-duration:'+e.hastighet+'ms">\n            <div id="lysboksMain">\n                <div id="lysboksBildeWrapper">\n                    <div id="lysboksLeft"><svg viewBox="0 0 350 500" fill="#000000"><polygon points="350,100 250,0 0,250 250,500 350,400 200,250"></polygon></svg></div>\n                    <div id="lysboksBilde"><img></div>\n                    <div id="lysboksRight"><svg viewBox="0 0 350 500" fill="#000000"><polygon points="0,100 100,0 350,250 100,500 0,400 150,250"/></svg></div>\n                </div>\n                <div id="lysboksTooltip"></div>\n            </div>\n            <div id="miniatyrBilder"></div>\n        </div>\n        ',n=document.createElement("div");i.appendChild(n),n.outerHTML=l,function(){let e=document.querySelector("#miniatyrBilder");for(let i=0;i<t.length;i++){let l=document.createElement("div");l.setAttribute("data-target",i),l.setAttribute("data-bilde",t[i].stor),l.setAttribute("class","miniatyrBilde"),l.setAttribute("id","miniatyrBilde"+i),l.innerHTML='<img src="'+t[i].liten+'" title="'+t[i].title+'">',e.appendChild(l)}}(),function(){let t=document.createElement("div");t.setAttribute("id","lysboksLukk"),t.innerHTML='<svg viewBox="0 0 500 500"><polygon points="0,100 100,0 250,150 400,0 500,100 350,250 500,400 400,500 250,350 100,500 0,400 150,250"/>',"bilde"===e.lukk?document.querySelector("#lysboksBilde").appendChild(t):"utenfor"===e.lukk&&document.querySelector("#lysboks").appendChild(t)}()}(),document.querySelectorAll(e.beholder+" [data-target]").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),s(parseInt(e.dataset.target)),document.querySelector("#lysboks").classList.replace("hide","show"),d(!0)}))})),document.querySelectorAll("#lysboks, #lysboksLukk").forEach((e=>{e.addEventListener("click",(e=>{e.currentTarget===e.target&&(document.querySelector("#lysboks").classList.replace("show","hide"),d(!1))}),!1)})),document.querySelectorAll(".miniatyrBilde, #lysboksLeft, #lysboksRight").forEach((t=>{t.addEventListener("click",(i=>{let l=parseInt(t.dataset.target);document.querySelector("#lysboksMain").style.transitionDuration=e.hastighet/2+"ms",document.querySelector("#lysboksMain").classList.add("hide"),setTimeout((()=>{s(l)}),e.hastighet/2)}))}))}))}))}